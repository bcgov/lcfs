{% if environment == 'dev' %}
    {% set base_url = "https://lcfs-dev.apps.silver.devops.gov.bc.ca" %}
{% elif environment == 'test' %}
    {% set base_url = "https://lcfs-test.apps.silver.devops.gov.bc.ca" %}
{% else %}
    {# Default to production #}
    {% set base_url = "https://lowcarbonfuels.gov.bc.ca" %}
{% endif %}
<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            td {
                padding: 15px 8px 15px 8px;
            }
            body {
                margin: 0;
                padding: 20px;
                font-family: sans-serif;
            }
            .content {
                margin-left: 15px;
                margin-right: 15px;
                font-size: 13px;
                line-height: 20px;
            }
            .footer {
                color: #666;
                font-size: 12px;
            }
            .fuel-codes-table {
                width: 100%;
                border-collapse: collapse;
                margin: 20px 0;
                font-size: 12px;
            }
            .fuel-codes-table th {
                background-color: #f5f5f5;
                border: 1px solid #ddd;
                padding: 10px 8px;
                text-align: left;
                font-weight: bold;
            }
            .fuel-codes-table td {
                border: 1px solid #ddd;
                padding: 8px;
                text-align: left;
            }
            .fuel-codes-table tr:nth-child(even) {
                background-color: #f9f9f9;
            }
            .fuel-codes-table tr:hover {
                background-color: #f1f1f1;
            }
        </style>
    </head>
    <body>
        <table
            style="
                width: 100%;
                font-family: sans-serif;
                border-collapse: collapse;
                border: 2px solid #003366;
            "
        >
            <tbody>
                <tr style="background: #003366; font-size: 20px; color: white">
                    <td style="text-align: center;">
                        <img
                            src="{{ base_url }}/images/email-header.png"
                            alt="Government of British Columbia"
                            height="50"
                            style="display: block; margin: 0 auto"
                        />
                    </td>
                </tr>
                <tr style="min-height: 400px">
                    <td colspan="2" style="border-top: 4px solid #fcba19">
                        <div class="content">
                            <p>
                                This email was generated by the Government of British
                                Columbia, Low Carbon Fuel Standard Portal.
                            </p>

                            <p>
                                <span style="font-weight: bold">
                                    The following has occurred within the Low Carbon
                                    Fuel Standard Portal: {{ notification_type }} {{ message.status }}
                                </span><br />
                                For more details, please go to: 
                                {% if url_slug == 'compliance-reporting' %}
                                    <a href="{{ base_url }}/{{ url_slug }}/{{ message.compliancePeriod }}/{{ message.id }}">
                                        {{ base_url }}/{{ url_slug }}/{{ message.compliancePeriod }}/{{ message.id }}
                                    </a>
                                {% else %}
                                    <a href="{{ base_url }}/{{ url_slug }}/{{ message.id }}">
                                        {{ base_url }}/{{ url_slug }}/{{ message.id }}
                                    </a>
                                {% endif %}
                            </p>

                            {% if fuel_codes and fuel_codes|length > 0 %}
                            <h3 style="color: #003366; margin-top: 25px;">Fuel Codes Expiring Soon</h3>
                            <table class="fuel-codes-table">
                                <thead>
                                    <tr>
                                        <th>Fuel Code</th>
                                        <th>Fuel Type</th>
                                        <th>Company</th>
                                        <th>Expiration Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for fuel_code in fuel_codes %}
                                    <tr>
                                        <td>{{ fuel_code.fuel_code }}</td>
                                        <td>{{ fuel_code.fuel_type }}</td>
                                        <td>{{ fuel_code.company }}</td>
                                        <td>{{ fuel_code.expiration_date }}</td>
                                        <td>{{ fuel_code.status }}</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                            {% endif %}

                            <p>
                                You received this email because you subscribed at the
                                site above. To stop receiving these emails, log in to
                                your account here:
                                <a href="{{ base_url }}/notifications">
                                    {{ base_url }}/notifications
                                </a>
                            </p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>