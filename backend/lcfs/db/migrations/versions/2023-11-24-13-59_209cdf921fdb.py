"""adding first and last name in user profile

Revision ID: 209cdf921fdb
Revises: 1f2d554806ba
Create Date: 2023-11-24 13:59:45.714215

"""
import sqlalchemy as sa
from alembic import op

# revision identifiers, used by Alembic.
revision = "209cdf921fdb"
down_revision = "1f2d554806ba"
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_unique_constraint(None, "category", ["category_id"])
    op.create_unique_constraint(None, "comment", ["comment_id"])
    op.create_unique_constraint(None, "issuance", ["issuance_id"])
    op.create_unique_constraint(None, "issuance_history", ["issuance_history_id"])
    op.add_column(
        "notification_channel_subscription",
        sa.Column("notification_channel_id", sa.Integer(), nullable=True),
    )
    op.drop_constraint(
        "notification_channel_subscription_channel_id_fkey",
        "notification_channel_subscription",
        type_="foreignkey",
    )
    op.create_foreign_key(
        None,
        "notification_channel_subscription",
        "notification_channel",
        ["notification_channel_id"],
        ["notification_channel_id"],
    )
    op.drop_column("notification_channel_subscription", "channel_id")
    op.create_unique_constraint(None, "transaction", ["transaction_id"])
    op.add_column(
        "transfer", sa.Column("transfer_status_id", sa.Integer(), nullable=True)
    )
    op.add_column(
        "transfer", sa.Column("transfer_category_id", sa.Integer(), nullable=True)
    )
    op.create_unique_constraint(None, "transfer", ["transfer_id"])
    op.drop_constraint(
        "transfer_transfer_category_fkey", "transfer", type_="foreignkey"
    )
    op.create_foreign_key(
        None,
        "transfer",
        "transfer_status",
        ["transfer_status_id"],
        ["transfer_status_id"],
    )
    op.create_foreign_key(
        None, "transfer", "category", ["transfer_category_id"], ["category_id"]
    )
    op.drop_column("transfer", "transfer_category")
    op.add_column(
        "user_profile",
        sa.Column(
            "first_name",
            sa.String(length=50),
            nullable=False,
            comment="Users firstname",
        ),
    )
    op.add_column(
        "user_profile",
        sa.Column(
            "last_name", sa.String(length=50), nullable=False, comment="Users lastname"
        ),
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_column("user_profile", "last_name")
    op.drop_column("user_profile", "first_name")
    op.add_column(
        "transfer",
        sa.Column(
            "transfer_category", sa.INTEGER(), autoincrement=False, nullable=True
        ),
    )
    op.drop_constraint(None, "transfer", type_="foreignkey")
    op.drop_constraint(None, "transfer", type_="foreignkey")
    op.create_foreign_key(
        "transfer_transfer_category_fkey",
        "transfer",
        "category",
        ["transfer_category"],
        ["category_id"],
    )
    op.drop_constraint(None, "transfer", type_="unique")
    op.drop_column("transfer", "transfer_category_id")
    op.drop_column("transfer", "transfer_status_id")
    op.drop_constraint(None, "transaction", type_="unique")
    op.add_column(
        "notification_channel_subscription",
        sa.Column("channel_id", sa.INTEGER(), autoincrement=False, nullable=True),
    )
    op.drop_constraint(None, "notification_channel_subscription", type_="foreignkey")
    op.create_foreign_key(
        "notification_channel_subscription_channel_id_fkey",
        "notification_channel_subscription",
        "notification_channel",
        ["channel_id"],
        ["notification_channel_id"],
    )
    op.drop_column("notification_channel_subscription", "notification_channel_id")
    op.drop_constraint(None, "issuance_history", type_="unique")
    op.drop_constraint(None, "issuance", type_="unique")
    op.drop_constraint(None, "comment", type_="unique")
    op.drop_constraint(None, "category", type_="unique")
    # ### end Alembic commands ###
