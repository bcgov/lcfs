"""Data Fixes

Revision ID: 8491890dd688
Revises: aeaa26f5cdd5
Create Date: 2024-12-04 23:00:10.708533

"""

from alembic import op
from sqlalchemy import update

from lcfs.db.models import FuelType, AllocationTransactionType
from lcfs.db.models.fuel.FuelType import QuantityUnitsEnum

# revision identifiers, used by Alembic.
revision = "8491890dd688"
down_revision = "aeaa26f5cdd5"
branch_labels = None
depends_on = None


def upgrade() -> None:
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute(
        update(FuelType)
        .where(FuelType.fuel_type_id == 6)
        .values(units=QuantityUnitsEnum.Kilograms)
    )

    op.execute(
        update(FuelType).where(FuelType.fuel_type_id == 20).values(fossil_derived=False)
    )

    # Update 'type' and 'description' in allocation_transaction_type where allocation_transaction_type_id = 2
    op.execute(
        update(AllocationTransactionType)
        .where(AllocationTransactionType.allocation_transaction_type_id == 2)
        .values(
            type="Allocated to",
            description="Fuel allocated to another supplier under an allocation agreement",
        )
    )

    # Update 'type' and 'description' in allocation_transaction_type where allocation_transaction_type_id = 1
    op.execute(
        update(AllocationTransactionType)
        .where(AllocationTransactionType.allocation_transaction_type_id == 1)
        .values(
            type="Allocated from",
            description="Fuel allocated from another supplier under an allocation agreement",
        )
    )
    # ### end Alembic commands ###


def downgrade() -> None:
    pass
